!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.Fireworks=i():t.Fireworks=i()}("undefined"!=typeof self?self:this,function(){return function(t){function i(e){if(s[e])return s[e].exports;var o=s[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,i),o.l=!0,o.exports}var s={};return i.m=t,i.c=s,i.d=function(t,s,e){i.o(t,s)||Object.defineProperty(t,s,{configurable:!1,enumerable:!0,get:e})},i.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(s,"a",s),s},i.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},i.p="",i(i.s=1)}([function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.random=function(t,i){return Math.random()*(i-t)+t},i.TAU=2*Math.PI},function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const e=s(2),o=s(3);class n{constructor(t,{rocketSpawnInterval:i=150,maxRockets:s=3,numParticles:n=100,explosionMinHeight:h=.2,explosionMaxHeight:a=.9,explosionChance:c=.08}={}){this.rocketSpawnInterval=i,this.maxRockets=s,this.cw=t.clientWidth,this.ch=t.clientHeight,this.graphics=new e.default(t),this.things=new o.default({maxRockets:this.maxRockets,numParticles:n,explosionMinHeight:h,explosionMaxHeight:a,explosionChance:c,cw:this.cw,ch:this.ch}),t.appendChild(this.graphics.canvas),console.log(this.ch*(1-a))}start(){return this.maxRockets>0&&(this.interval=setInterval(()=>this.things.spawnRockets(),this.rocketSpawnInterval),this.rafInterval=window.requestAnimationFrame(()=>this.update())),()=>this.stop()}stop(){window.clearInterval(this.interval),this.interval=null}fire(){this.things.spawnRocket(),this.rafInterval||(this.rafInterval=window.requestAnimationFrame(()=>this.update()))}update(){this.graphics.clear();for(const t of this.things)this.graphics.drawParticle(t),t.update(),this.things.shouldRemove(t)?this.things.delete(t):this.things.shouldExplode(t)&&this.things.explode(t);this.interval||this.things.size>0?this.rafInterval=window.requestAnimationFrame(()=>this.update()):(this.graphics.clear(!0),this.rafInterval=null)}}i.default=n},function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});class e{constructor(t){this.cw=t.clientWidth,this.ch=t.clientHeight;const i=document.createElement("canvas");i.width=this.cw,i.width=this.ch,this._canvas=document.createElement("canvas"),this.ctx=this._canvas.getContext("2d"),this.canvas.width=this.cw,this.canvas.height=this.ch}get canvas(){return this._canvas}clear(t=!1){this.ctx.globalCompositeOperation="destination-out",this.ctx.fillStyle=`rgba(0, 0, 0 ${t?"":", 0.5"})`,this.ctx.fillRect(0,0,this.cw,this.ch),this.ctx.globalCompositeOperation="lighter"}drawParticle(t){const i=t.positions[t.positions.length-1];this.ctx.beginPath(),this.ctx.moveTo(i.x,i.y),this.ctx.lineTo(t.position.x,t.position.y),this.ctx.lineWidth=t.size,this.ctx.strokeStyle=`hsla(${t.hue}, 100%, ${t.brightness}%, ${t.alpha})`,this.ctx.stroke()}}i.default=e},function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const e=s(4),o=s(0);class n extends Set{constructor({maxRockets:t,numParticles:i,explosionMinHeight:s,explosionMaxHeight:e,explosionChance:o,cw:n,ch:h}){super(),this.maxRockets=t,this.numParticles=i,this.explosionMaxHeight=e,this.explosionMinHeight=s,this.explosionChance=o,this.cw=n,this.ch=h}shouldRemove(t){return t.alpha<=.1||t.size<=1||(t.position.x>this.cw||t.position.x<0||(t.position.y>this.ch||t.position.y<0))}shouldExplode(t){return!!t.isRocket&&(t.position.y<=this.ch*(1-this.explosionMaxHeight)||!(t.position.y>=this.ch*(1-this.explosionMinHeight))&&o.random(0,1)<=this.explosionChance)}explode(t){for(let i=0;i<this.numParticles;i+=1)this.add(new e.default({position:{x:t.position.x,y:t.position.y},hue:t.hue,brightness:t.brightness}));this.delete(t)}spawnRocket(){this.add(new e.default({isRocket:!0,position:{x:o.random(0,this.cw),y:this.ch}}))}spawnRockets(){this.rockets<this.maxRockets&&this.spawnRocket()}get rockets(){return[...this].filter(t=>t.isRocket).length}}i.default=n},function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const e=s(0);class o{constructor({isRocket:t=!1,hue:i=e.random(1,360),brightness:s=e.random(50,60),position:o}){if(this.isRocket=t,this.position=o,this.positions=[this.position,this.position,this.position],this.isRocket)this.velocity={x:e.random(-3,3),y:e.random(-7,-3)},this.shrink=.999,this.resistance=1;else{const t=e.random(0,e.TAU),i=15*Math.cos(e.random(0,e.TAU));this.velocity={x:Math.cos(t)*i,y:Math.sin(t)*i},this.shrink=e.random(0,.05)+.93,this.resistance=.92}this.gravity=.01,this.size=3,this.alpha=1,this.fade=0,this.hue=i,this.brightness=s}update(){this.positions.pop(),this.positions.unshift({x:this.position.x,y:this.position.y}),this.velocity.x*=this.resistance,this.velocity.y*=this.resistance,this.velocity.y+=this.gravity,this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.size*=this.shrink,this.alpha-=this.fade}}i.default=o}]).default});